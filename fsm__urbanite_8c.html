<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Urbanite: Parking aid system: common/src/fsm_urbanite.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Urbanite: Parking aid system
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fsm__urbanite_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fsm_urbanite.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Urbanite FSM main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="port__system_8h.html">port_system.h</a>&quot;</code><br />
<code>#include &quot;fsm.h&quot;</code><br />
<code>#include &quot;<a class="el" href="fsm__urbanite_8h.html">fsm_urbanite.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to define the Urbanite FSM.  <a href="structfsm__urbanite__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab64512dbce31c38a36bff5e337f4fb8f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#ab64512dbce31c38a36bff5e337f4fb8f">check_on</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:ab64512dbce31c38a36bff5e337f4fb8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the button has been pressed for the required time to turn ON the Urbanite system.  <a href="fsm__urbanite_8c.html#ab64512dbce31c38a36bff5e337f4fb8f">More...</a><br /></td></tr>
<tr class="separator:ab64512dbce31c38a36bff5e337f4fb8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a941bb12de41897bba2b612cc87b3164b"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a941bb12de41897bba2b612cc87b3164b">check_off</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a941bb12de41897bba2b612cc87b3164b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the button has been pressed for the required time to turn OFF the system.  <a href="fsm__urbanite_8c.html#a941bb12de41897bba2b612cc87b3164b">More...</a><br /></td></tr>
<tr class="separator:a941bb12de41897bba2b612cc87b3164b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d1dafd43be6fe5d6aaf70cb886c6dc7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a7d1dafd43be6fe5d6aaf70cb886c6dc7">check_new_measure</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a7d1dafd43be6fe5d6aaf70cb886c6dc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a new measurement is ready.  <a href="fsm__urbanite_8c.html#a7d1dafd43be6fe5d6aaf70cb886c6dc7">More...</a><br /></td></tr>
<tr class="separator:a7d1dafd43be6fe5d6aaf70cb886c6dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a780f5d043d653e19188ae76b8cf9a24f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a780f5d043d653e19188ae76b8cf9a24f">check_pause_display</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a780f5d043d653e19188ae76b8cf9a24f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if it has been required to pause the display.  <a href="fsm__urbanite_8c.html#a780f5d043d653e19188ae76b8cf9a24f">More...</a><br /></td></tr>
<tr class="separator:a780f5d043d653e19188ae76b8cf9a24f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c31f180f16c2d66ef56e62004c83bc"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a91c31f180f16c2d66ef56e62004c83bc">check_activity</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a91c31f180f16c2d66ef56e62004c83bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if any of the elements of the system is active.  <a href="fsm__urbanite_8c.html#a91c31f180f16c2d66ef56e62004c83bc">More...</a><br /></td></tr>
<tr class="separator:a91c31f180f16c2d66ef56e62004c83bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05439bd432881a570511d46a7d2ff699"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a05439bd432881a570511d46a7d2ff699">check_no_activity</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a05439bd432881a570511d46a7d2ff699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if all the elements of the system are inactive.  <a href="fsm__urbanite_8c.html#a05439bd432881a570511d46a7d2ff699">More...</a><br /></td></tr>
<tr class="separator:a05439bd432881a570511d46a7d2ff699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a104fb214aed1d538bb63184b71a93c49"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a104fb214aed1d538bb63184b71a93c49">check_activity_in_measure</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a104fb214aed1d538bb63184b71a93c49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if any a new measurement is ready while the system is in low power mode.  <a href="fsm__urbanite_8c.html#a104fb214aed1d538bb63184b71a93c49">More...</a><br /></td></tr>
<tr class="separator:a104fb214aed1d538bb63184b71a93c49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed418c9291c1c9a2c6d13b3fd1c0d6e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a6ed418c9291c1c9a2c6d13b3fd1c0d6e">do_start_up_measure</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a6ed418c9291c1c9a2c6d13b3fd1c0d6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the Urbanite system ON.  <a href="fsm__urbanite_8c.html#a6ed418c9291c1c9a2c6d13b3fd1c0d6e">More...</a><br /></td></tr>
<tr class="separator:a6ed418c9291c1c9a2c6d13b3fd1c0d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af47ce293fa69428b1baa58a1cbc5304f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#af47ce293fa69428b1baa58a1cbc5304f">do_display_distance</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:af47ce293fa69428b1baa58a1cbc5304f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display the distance measured by the ultrasound sensor.  <a href="fsm__urbanite_8c.html#af47ce293fa69428b1baa58a1cbc5304f">More...</a><br /></td></tr>
<tr class="separator:af47ce293fa69428b1baa58a1cbc5304f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb471de53bbd6f66b4e331e056f8696"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a2bb471de53bbd6f66b4e331e056f8696">do_pause_display</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a2bb471de53bbd6f66b4e331e056f8696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause or resume the display system.  <a href="fsm__urbanite_8c.html#a2bb471de53bbd6f66b4e331e056f8696">More...</a><br /></td></tr>
<tr class="separator:a2bb471de53bbd6f66b4e331e056f8696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad4789790f16502c7e952755d895b492"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#aad4789790f16502c7e952755d895b492">do_stop_urbanite</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:aad4789790f16502c7e952755d895b492"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the Urbanite system OFF.  <a href="fsm__urbanite_8c.html#aad4789790f16502c7e952755d895b492">More...</a><br /></td></tr>
<tr class="separator:aad4789790f16502c7e952755d895b492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a4825398f34ad61ae90c794df3fdaae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a6a4825398f34ad61ae90c794df3fdaae">do_sleep_while_off</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a6a4825398f34ad61ae90c794df3fdaae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the low power mode while the Urbanite is awakened by a debug breakpoint or similar in the <code>SLEEP_WHILE_OFF</code> state.  <a href="fsm__urbanite_8c.html#a6a4825398f34ad61ae90c794df3fdaae">More...</a><br /></td></tr>
<tr class="separator:a6a4825398f34ad61ae90c794df3fdaae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad10008c814d0625ee12467bc836d702"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#aad10008c814d0625ee12467bc836d702">do_sleep_while_on</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:aad10008c814d0625ee12467bc836d702"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the low power mode while the Urbanite is awakened by a debug breakpoint or similar in the <code>SLEEP_WHILE_ON</code> state.  <a href="fsm__urbanite_8c.html#aad10008c814d0625ee12467bc836d702">More...</a><br /></td></tr>
<tr class="separator:aad10008c814d0625ee12467bc836d702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91c6103611e7226d46aed6d0c78b1dd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#af91c6103611e7226d46aed6d0c78b1dd">do_sleep_while_measure</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:af91c6103611e7226d46aed6d0c78b1dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the low power mode while the Urbanite is measuring the distance and it is waiting for a new measurement.  <a href="fsm__urbanite_8c.html#af91c6103611e7226d46aed6d0c78b1dd">More...</a><br /></td></tr>
<tr class="separator:af91c6103611e7226d46aed6d0c78b1dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d2922e21185739c528166e38ed8ab3b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a9d2922e21185739c528166e38ed8ab3b">do_sleep_off</a> (fsm_t *p_this)</td></tr>
<tr class="memdesc:a9d2922e21185739c528166e38ed8ab3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the low power mode while the Urbanite is OFF.  <a href="fsm__urbanite_8c.html#a9d2922e21185739c528166e38ed8ab3b">More...</a><br /></td></tr>
<tr class="separator:a9d2922e21185739c528166e38ed8ab3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10d874543e8591ed9615a47b008dab3d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a10d874543e8591ed9615a47b008dab3d">fsm_urbanite_init</a> (<a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a> *p_fsm_urbanite, <a class="el" href="structfsm__button__t.html">fsm_button_t</a> *p_fsm_button, uint32_t on_off_press_time_ms, uint32_t pause_display_time_ms, <a class="el" href="structfsm__ultrasound__t.html">fsm_ultrasound_t</a> *p_fsm_ultrasound_rear, <a class="el" href="structfsm__display__t.html">fsm_display_t</a> *p_fsm_display_rear)</td></tr>
<tr class="memdesc:a10d874543e8591ed9615a47b008dab3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new Urbanite FSM.  <a href="fsm__urbanite_8c.html#a10d874543e8591ed9615a47b008dab3d">More...</a><br /></td></tr>
<tr class="separator:a10d874543e8591ed9615a47b008dab3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f367002434396c3f0baa4a4106bcb6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a2f367002434396c3f0baa4a4106bcb6a">fsm_urbanite_new</a> (<a class="el" href="structfsm__button__t.html">fsm_button_t</a> *p_fsm_button, uint32_t on_off_press_time_ms, uint32_t pause_display_time_ms, <a class="el" href="structfsm__ultrasound__t.html">fsm_ultrasound_t</a> *p_fsm_ultrasound_rear, <a class="el" href="structfsm__display__t.html">fsm_display_t</a> *p_fsm_display_rear)</td></tr>
<tr class="memdesc:a2f367002434396c3f0baa4a4106bcb6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new Urbanite FSM.  <a href="fsm__urbanite_8c.html#a2f367002434396c3f0baa4a4106bcb6a">More...</a><br /></td></tr>
<tr class="separator:a2f367002434396c3f0baa4a4106bcb6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb1e5b600d89599e654890a67c55b1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a0cb1e5b600d89599e654890a67c55b1b">fsm_urbanite_fire</a> (<a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a> *p_fsm_urbanite)</td></tr>
<tr class="memdesc:a0cb1e5b600d89599e654890a67c55b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fire the Urbanite FSM.  <a href="fsm__urbanite_8c.html#a0cb1e5b600d89599e654890a67c55b1b">More...</a><br /></td></tr>
<tr class="separator:a0cb1e5b600d89599e654890a67c55b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a932fc306dcc6c89fb66a29f1c8a82b50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#a932fc306dcc6c89fb66a29f1c8a82b50">fsm_urbanite_destroy</a> (<a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a932fc306dcc6c89fb66a29f1c8a82b50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy an Urbanite FSM.  <a href="fsm__urbanite_8c.html#a932fc306dcc6c89fb66a29f1c8a82b50">More...</a><br /></td></tr>
<tr class="separator:a932fc306dcc6c89fb66a29f1c8a82b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aeba21fd1038f0c56fc5d6b1aaa9e2148"><td class="memItemLeft" align="right" valign="top">fsm_trans_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__urbanite_8c.html#aeba21fd1038f0c56fc5d6b1aaa9e2148">fsm_trans_urbanite</a> []</td></tr>
<tr class="memdesc:aeba21fd1038f0c56fc5d6b1aaa9e2148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array representing the transitions table of the FSM Urbanite.  <a href="fsm__urbanite_8c.html#aeba21fd1038f0c56fc5d6b1aaa9e2148">More...</a><br /></td></tr>
<tr class="separator:aeba21fd1038f0c56fc5d6b1aaa9e2148"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Urbanite FSM main file. </p>
<dl class="section author"><dt>Author</dt><dd>Sistemas Digitales II </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-01-01 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a91c31f180f16c2d66ef56e62004c83bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c31f180f16c2d66ef56e62004c83bc">&#9670;&nbsp;</a></span>check_activity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_activity </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if any of the elements of the system is active. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Return <code>true</code> if any of the elements (button, ultrasound, or display) is active. Otherwise, return <code>false</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a104fb214aed1d538bb63184b71a93c49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a104fb214aed1d538bb63184b71a93c49">&#9670;&nbsp;</a></span>check_activity_in_measure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_activity_in_measure </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if any a new measurement is ready while the system is in low power mode. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__urbanite_8c.html#a7d1dafd43be6fe5d6aaf70cb886c6dc7" title="Check if a new measurement is ready.">check_new_measure()</a></code> to check if a new measurement is ready and return the result. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a7d1dafd43be6fe5d6aaf70cb886c6dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d1dafd43be6fe5d6aaf70cb886c6dc7">&#9670;&nbsp;</a></span>check_new_measure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_new_measure </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a new measurement is ready. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__ultrasound_8h.html#ab233523a804cd278c15f551da0fb466b" title="Return the flag that indicates if a new measurement is ready.">fsm_ultrasound_get_new_measurement_ready()</a></code> to check if a new measurement is ready and return the result. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a05439bd432881a570511d46a7d2ff699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05439bd432881a570511d46a7d2ff699">&#9670;&nbsp;</a></span>check_no_activity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_no_activity </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if all the elements of the system are inactive. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__urbanite_8c.html#a91c31f180f16c2d66ef56e62004c83bc" title="Check if any of the elements of the system is active.">check_activity()</a></code> and return the inverse of the result. The result will be <code>true</code> if all the elements of the system are inactive, otherwise it will be <code>false</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct than contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a941bb12de41897bba2b612cc87b3164b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a941bb12de41897bba2b612cc87b3164b">&#9670;&nbsp;</a></span>check_off()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_off </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the button has been pressed for the required time to turn OFF the system. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. It is enough to call the function <code><a class="el" href="fsm__urbanite_8c.html#ab64512dbce31c38a36bff5e337f4fb8f" title="Check if the button has been pressed for the required time to turn ON the Urbanite system.">check_on()</a></code> because the required time to turn ON and OFF the system is the same. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="ab64512dbce31c38a36bff5e337f4fb8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab64512dbce31c38a36bff5e337f4fb8f">&#9670;&nbsp;</a></span>check_on()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_on </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the button has been pressed for the required time to turn ON the Urbanite system. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__button_8h.html#a8ceba02b9a4674bb307147638a4cf3fc" title="Return the duration of the last button press.">fsm_button_get_duration()</a></code> to get the duration of the button press <br  />
✅ 2. Return <code>true</code> if the duration is greater than 0 and greater than the required time to turn ON the system. Otherwise, return <code>false</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a780f5d043d653e19188ae76b8cf9a24f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a780f5d043d653e19188ae76b8cf9a24f">&#9670;&nbsp;</a></span>check_pause_display()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_pause_display </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if it has been required to pause the display. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__button_8h.html#a8ceba02b9a4674bb307147638a4cf3fc" title="Return the duration of the last button press.">fsm_button_get_duration()</a></code> to get the duration of the button press <br  />
✅ 2. Return <code>true</code> if the duration is greater than 0, less than the required time to turn ON the system, and greater than the required time to pause the display. Otherwise, return <code>false</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="af47ce293fa69428b1baa58a1cbc5304f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af47ce293fa69428b1baa58a1cbc5304f">&#9670;&nbsp;</a></span>do_display_distance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_display_distance </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Display the distance measured by the ultrasound sensor. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Get the distance measured by the ultrasound sensor by calling <code><a class="el" href="fsm__ultrasound_8h.html#aff92f27acb083d23359ccfedbbae8012" title="Return the distance of the last object detected by the ultrasound sensor.a64l.">fsm_ultrasound_get_distance()</a></code> with the right ultrasound sensor. <br  />
✅ 2. <b>If the system is paused</b>: &#160;&#160;&#160;&#160; If the distance is less than <code>DANGER_MAX_CM / 2</code> cm, set the distance to the display and set the display status to <code>true</code>. Otherwise, set the display status to <code>false</code>. <br  />
If the system <b>is not paused</b>, set the distance to the display. <br  />
✅ 3. Print a message to help yourself to debug and log the distance measured by the ultrasound sensor. You could do something like: <br  />
</p>
</blockquote>
<div class="fragment"><div class="line">printf(<span class="stringliteral">&quot;[URBANITE][%ld] Distance: %ld cm\n&quot;</span>, <a class="code" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6">port_system_get_millis</a>(), distance_cm);</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Where <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Returns the number of milliseconds since the system started.">port_system_get_millis()</a></code> returns the current system tick. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2bb471de53bbd6f66b4e331e056f8696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bb471de53bbd6f66b4e331e056f8696">&#9670;&nbsp;</a></span>do_pause_display()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_pause_display </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pause or resume the display system. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Reset the duration of the button by calling <code><a class="el" href="fsm__button_8h.html#a911736d0a80d826cf083b94d049aacee" title="Reset the duration of the last button press.">fsm_button_reset_duration()</a></code> to avoid the system to pause again. <br  />
✅ 2. Invert the pause status. If the system is paused, set the pause status to <code>false</code>. If the system is not paused, set the pause status to <code>true</code>. <br  />
✅ 3. Activate or deactivate the display depending on the new pause status by calling <code><a class="el" href="fsm__display_8h.html#a83d5e775845d1c91e63f74eebde0a603" title="Set the status of the display FSM.">fsm_display_set_status()</a></code> with the right parameter. <br  />
✅ 4. Print status depending on the pause status. You could print messages like: <br  />
</p>
</blockquote>
<div class="fragment"><div class="line">printf(<span class="stringliteral">&quot;[URBANITE][%ld] Urbanite system display PAUSE\n&quot;</span>, <a class="code" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6">port_system_get_millis</a>());</div>
<div class="line">printf(<span class="stringliteral">&quot;[URBANITE][%ld] Urbanite system display RESUME\n&quot;</span>, <a class="code" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6">port_system_get_millis</a>());</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Where <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Returns the number of milliseconds since the system started.">port_system_get_millis()</a></code> returns the current system tick. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d2922e21185739c528166e38ed8ab3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d2922e21185739c528166e38ed8ab3b">&#9670;&nbsp;</a></span>do_sleep_off()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_sleep_off </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the low power mode while the Urbanite is OFF. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__system_8h.html#ae3c6ff19d65f5cdeb1e1b556b0823b40" title="Enable low power consumption in sleep mode.">port_system_sleep()</a></code> to start the low power mode <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af91c6103611e7226d46aed6d0c78b1dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af91c6103611e7226d46aed6d0c78b1dd">&#9670;&nbsp;</a></span>do_sleep_while_measure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_sleep_while_measure </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the low power mode while the Urbanite is measuring the distance and it is waiting for a new measurement. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__system_8h.html#ae3c6ff19d65f5cdeb1e1b556b0823b40" title="Enable low power consumption in sleep mode.">port_system_sleep()</a></code> to start the low power mode <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6a4825398f34ad61ae90c794df3fdaae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a4825398f34ad61ae90c794df3fdaae">&#9670;&nbsp;</a></span>do_sleep_while_off()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_sleep_while_off </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the low power mode while the Urbanite is awakened by a debug breakpoint or similar in the <code>SLEEP_WHILE_OFF</code> state. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__system_8h.html#ae3c6ff19d65f5cdeb1e1b556b0823b40" title="Enable low power consumption in sleep mode.">port_system_sleep()</a></code> to start the low power mode <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aad10008c814d0625ee12467bc836d702"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad10008c814d0625ee12467bc836d702">&#9670;&nbsp;</a></span>do_sleep_while_on()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_sleep_while_on </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the low power mode while the Urbanite is awakened by a debug breakpoint or similar in the <code>SLEEP_WHILE_ON</code> state. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__system_8h.html#ae3c6ff19d65f5cdeb1e1b556b0823b40" title="Enable low power consumption in sleep mode.">port_system_sleep()</a></code> to start the low power mode <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ed418c9291c1c9a2c6d13b3fd1c0d6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed418c9291c1c9a2c6d13b3fd1c0d6e">&#9670;&nbsp;</a></span>do_start_up_measure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_start_up_measure </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Turn the Urbanite system ON. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Reset the duration of the button by calling <code><a class="el" href="fsm__button_8h.html#a911736d0a80d826cf083b94d049aacee" title="Reset the duration of the last button press.">fsm_button_reset_duration()</a></code> to avoid the system to turn OFF again. <br  />
✅ 2. Start the ultrasound sensor by calling its appropriate function with the right parameter. With this the ultrasound sensor will start measuring the distance. <br  />
✅ 3. Set the appropriate status of the display system by calling its function with the right parameter. With this the display system will start showing the distance. <br  />
&#160;&#160;&#160;&#160;💡 Print a message to help yourself to debug and log the status of the system. You could do something like: <br  />
</p>
</blockquote>
<div class="fragment"><div class="line">printf(<span class="stringliteral">&quot;[URBANITE][%ld] Urbanite system ON\n&quot;</span>, <a class="code" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6">port_system_get_millis</a>());</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Where <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Returns the number of milliseconds since the system started.">port_system_get_millis()</a></code> returns the current system tick. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aad4789790f16502c7e952755d895b492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad4789790f16502c7e952755d895b492">&#9670;&nbsp;</a></span>do_stop_urbanite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_stop_urbanite </td>
          <td>(</td>
          <td class="paramtype">fsm_t *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Turn the Urbanite system OFF. </p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Reset the duration of the button by calling <code><a class="el" href="fsm__button_8h.html#a911736d0a80d826cf083b94d049aacee" title="Reset the duration of the last button press.">fsm_button_reset_duration()</a></code> to avoid the system to turn ON again. <br  />
✅ 2. Stop the ultrasound sensor by calling <code><a class="el" href="fsm__ultrasound_8h.html#aa764c6695952ad5696195e47263e1eba" title="Stop the ultrasound sensor.">fsm_ultrasound_stop()</a></code> with the right parameters. With this the ultrasound sensor will stop measuring the distance if it was measuring. <br  />
✅ 3. Turn the display system off by calling <code><a class="el" href="fsm__display_8h.html#a83d5e775845d1c91e63f74eebde0a603" title="Set the status of the display FSM.">fsm_display_set_status()</a></code> with the right parameter. With this the display system will stop showing the distance if it was showing it <br  />
✅ 4. If the system is paused, remove the pause status to avoid the system to turn ON again with the display paused. <br  />
✅ 5. Print a message to help yourself to debug and log the status of the system. You could do something like: <br  />
</p>
</blockquote>
<div class="fragment"><div class="line">printf(<span class="stringliteral">&quot;[URBANITE][%ld] Urbanite system OFF\n&quot;</span>, <a class="code" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6">port_system_get_millis</a>());</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Where <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Returns the number of milliseconds since the system started.">port_system_get_millis()</a></code> returns the current system tick. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code>fsm_t</code> struct that contains an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a932fc306dcc6c89fb66a29f1c8a82b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932fc306dcc6c89fb66a29f1c8a82b50">&#9670;&nbsp;</a></span>fsm_urbanite_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_urbanite_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy an Urbanite FSM. </p>
<p>This function destroys an Urbanite FSM and frees the memory.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Implement this function analogously to the <code><a class="el" href="fsm__button_8h.html#ace4aa8054f212e21a1e517faebe27126" title="Destroy a button FSM.">fsm_button_destroy()</a></code>, <code><a class="el" href="fsm__ultrasound_8h.html#ad3058bd02199823fbdf00b996002cb1b" title="Destroy an ultrasound FSM.">fsm_ultrasound_destroy()</a></code> and <code><a class="el" href="fsm__display_8h.html#aa4a55697e744379b93e16803110a1fd4" title="Destroy a display FSM.">fsm_display_destroy()</a></code> functions. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to an <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0cb1e5b600d89599e654890a67c55b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cb1e5b600d89599e654890a67c55b1b">&#9670;&nbsp;</a></span>fsm_urbanite_fire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_urbanite_fire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fire the Urbanite FSM. </p>
<p>This function is used to check the transitions and execute the actions of the Urbanite FSM.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code>fsm_fire()</code> with the received pointer to <code>fsm_t</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to the <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code> struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10d874543e8591ed9615a47b008dab3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10d874543e8591ed9615a47b008dab3d">&#9670;&nbsp;</a></span>fsm_urbanite_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fsm_urbanite_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_urbanite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__button__t.html">fsm_button_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>on_off_press_time_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pause_display_time_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__ultrasound__t.html">fsm_ultrasound_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_ultrasound_rear</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__display__t.html">fsm_display_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_display_rear</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new Urbanite FSM. </p>
<p>This FSM implements a system that measures the distance to the nearest obstacle and shows it on a display. The display is a RGB LED that changes its color depending on the distance to the obstacle. The system is activated by pressing a button. The system is deactivated by pressing the same button for the same time.</p>
<p>The basic implementation of this FSM assumes that the system is mounted on a car and the distance is measured by an ultrasound sensor located at the rear of the car. The display is located on the dashboard of the car. The button is assumed that activates when the driver is parking the car. The system can add more sensors and displays to cover more areas of the car.</p>
<p>A short press of the button pauses the display if it disturbs the driver, but the system continues measuring the distance. In case the driver wants to activate the display again, he must press the button again and the display will show the last distance measured. A long press of the button deactivates the ultrasounds and the displays.</p>
<p>When the system is OFF it does not measure the distance and the display is OFF. The system is in a low power mode.</p>
<p>To better understand the system, please watch the following video:</p>
<p><a href="https://youtu.be/d_IxjOpqCiI?si=MK48x9S98FJpKLfg" target="_blank"><img src="https://img.youtube.com/vi/d_IxjOpqCiI/0.jpg" alt="Watch the video" width="854" height="480" class="inline"/> </a></p>
<p>This is the HW diagram of the system:</p>
<div class="image">
<img src="fritzing_urbanite.png" alt=""/>
</div>
<p>This function initializes the default values of the FSM struct and calls to the <code>port</code> to initialize the HWs associated to the devices.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Call function <code>fsm_init()</code> with the received pointer to <code>fsm_t</code> and the transition table. <br  />
✅ 2. Initialize the fields <code>p_fsm_button</code>, <code>on_off_press_time_ms</code> <code>p_fsm_ultrasound_rear</code>, <code>pause_display_time_ms</code>, <code>p_fsm_display_rear</code> and <code>p_fsm_display_rear</code> of the Urbanite FSM with the received parameters. <br  />
✅ 3. Initialize the field <code>is_paused</code> to <code>false</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm_urbanite</td><td>Pointer to the Urbanite FSM. </td></tr>
    <tr><td class="paramname">p_fsm_button</td><td>Pointer to the button FSM that activates the system and disables the display if it disturbs the driver. </td></tr>
    <tr><td class="paramname">on_off_press_time_ms</td><td>Button press time in milliseconds to turn the system ON or OFF </td></tr>
    <tr><td class="paramname">pause_display_time_ms</td><td>Time in milliseconds to pause the display after a short press of the button </td></tr>
    <tr><td class="paramname">p_fsm_ultrasound_rear</td><td>Pointer to the ultrasound FSM that measures the distance to the rear obstacle. </td></tr>
    <tr><td class="paramname">p_fsm_display_rear</td><td>Pointer to the display FSM that shows the distance to the rear obstacle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsm_urbanite_t* Pointer to the Urbanite FSM. </dd></dl>

</div>
</div>
<a id="a2f367002434396c3f0baa4a4106bcb6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f367002434396c3f0baa4a4106bcb6a">&#9670;&nbsp;</a></span>fsm_urbanite_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__urbanite__t.html">fsm_urbanite_t</a>* fsm_urbanite_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__button__t.html">fsm_button_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>on_off_press_time_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pause_display_time_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__ultrasound__t.html">fsm_ultrasound_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_ultrasound_rear</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__display__t.html">fsm_display_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm_display_rear</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new Urbanite FSM. </p>
<p>This function creates a new Urbanite FSM with the given button, ultrasound, display FSMs and the required times for configuration.</p>
<blockquote class="doxtable">
<p><b>TODO alumnos:</b></p>
<p>✅ 1. Allocate memory for the <code><a class="el" href="structfsm__urbanite__t.html" title="Structure to define the Urbanite FSM.">fsm_urbanite_t</a></code> struct in the same way as the <code><a class="el" href="fsm__button_8h.html#af3bb8322bc7b726104949160c9b47276" title="Create a new button FSM.">fsm_button_new()</a></code>, <code><a class="el" href="fsm__ultrasound_8h.html#a7b1a051459a4fd05d84a8e6f07e8b678" title="Create a new ultrasound FSM.">fsm_ultrasound_new()</a></code> and <code><a class="el" href="fsm__display_8h.html#af8971b5e7c7e72e1d5f955b7ece4475b" title="Create a new display FSM.">fsm_display_new()</a></code> functions. <br  />
✅ 2. Initialize the <code>fsm_t</code> struct of the Urbanite FSM by calling the <code><a class="el" href="fsm__urbanite_8c.html#a10d874543e8591ed9615a47b008dab3d" title="Create a new Urbanite FSM.">fsm_urbanite_init()</a></code> function. <br  />
✅ 3. Return the pointer to the Urbanite FSM once it has been created and initialized. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm_button</td><td>Pointer to the button FSM to interact with the Urbanite. </td></tr>
    <tr><td class="paramname">on_off_press_time_ms</td><td>Time in ms to consider ON/OFF of the Urbanite parking aid system. </td></tr>
    <tr><td class="paramname">pause_display_time_ms</td><td>Time in ms to pause the display system. </td></tr>
    <tr><td class="paramname">p_fsm_ultrasound_rear</td><td>Pointer to the rear ultrasound FSM. </td></tr>
    <tr><td class="paramname">p_fsm_display_rear</td><td>Pointer to the rear display FSM. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsm_urbanite_t* Pointer to the Urbanite FSM. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aeba21fd1038f0c56fc5d6b1aaa9e2148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeba21fd1038f0c56fc5d6b1aaa9e2148">&#9670;&nbsp;</a></span>fsm_trans_urbanite</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsm_trans_t fsm_trans_urbanite[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array representing the transitions table of the FSM Urbanite. </p>
<div class="image">
<img src="fsm_system.png" alt=""/>
</div>
 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aport__system_8h_html_ab415270cfcefc90ed8b8842da4e3d4c6"><div class="ttname"><a href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6">port_system_get_millis</a></div><div class="ttdeci">uint32_t port_system_get_millis(void)</div><div class="ttdoc">Returns the number of milliseconds since the system started.</div><div class="ttdef"><b>Definition:</b> stm32f4_system.c:178</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_4e4d22e38ca4e2e8207825ee2d00bc54.html">src</a></li><li class="navelem"><a class="el" href="fsm__urbanite_8c.html">fsm_urbanite.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
